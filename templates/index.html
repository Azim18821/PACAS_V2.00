<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    
    <!-- Primary Meta Tags -->
    <title>PacasHomes - Find Your Dream Property in the UK | Zoopla, Rightmove & OpenRent</title>
    <meta name="title" content="PacasHomes - Find Your Dream Property in the UK" />
    <meta name="description" content="Search thousands of UK properties from Zoopla, Rightmove, and OpenRent in one place. Find houses, flats, and apartments for rent or sale. Free property search aggregator." />
    <meta name="keywords" content="property search UK, houses for rent, flats for sale, UK property finder, Zoopla properties, Rightmove search, OpenRent listings, property aggregator, find homes UK, rental properties" />
    <meta name="author" content="Aztura LTD" />
    <meta name="robots" content="index, follow" />
    <meta name="language" content="English" />
    <meta name="revisit-after" content="7 days" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://pacashomes.co.uk/" />
    <meta property="og:title" content="PacasHomes - Find Your Dream Property in the UK" />
    <meta property="og:description" content="Search thousands of UK properties from Zoopla, Rightmove, and OpenRent in one place. Find your perfect home today!" />
    <meta property="og:image" content="https://pacashomes.co.uk/static/og-image.jpg" />
    <meta property="og:site_name" content="PacasHomes" />
    <meta property="og:locale" content="en_GB" />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://pacashomes.co.uk/" />
    <meta property="twitter:title" content="PacasHomes - Find Your Dream Property in the UK" />
    <meta property="twitter:description" content="Search thousands of UK properties from Zoopla, Rightmove, and OpenRent in one place." />
    <meta property="twitter:image" content="https://pacashomes.co.uk/static/og-image.jpg" />
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://pacashomes.co.uk/" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico" />
    
    <!-- Schema.org Markup -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "PacasHomes",
      "url": "https://pacashomes.co.uk",
      "description": "UK property search aggregator combining Zoopla, Rightmove, and OpenRent listings",
      "publisher": {
        "@type": "Organization",
        "name": "Aztura LTD",
        "legalName": "Aztura LTD",
        "url": "https://pacashomes.co.uk",
        "logo": "https://pacashomes.co.uk/static/logo.png",
        "contactPoint": {
          "@type": "ContactPoint",
          "email": "contact@pacashomes.co.uk",
          "contactType": "Customer Service",
          "areaServed": "GB"
        }
      },
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://pacashomes.co.uk/?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>
    
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FNZJ78Q0XY"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-FNZJ78Q0XY', {
            'cookie_flags': 'SameSite=None;Secure',
            'anonymize_ip': true
        });
        
        // Track custom events
        function trackSearch(location) {
            gtag('event', 'search', {
                'search_term': location
            });
        }
        
        function trackFavorite(propertyId) {
            gtag('event', 'add_to_favorites', {
                'property_id': propertyId
            });
        }
        
        function trackRegistration() {
            gtag('event', 'sign_up', {
                'method': 'email'
            });
        }
    </script>
    
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <!-- User Header - Logged In -->
    <div class="user-header" id="userHeader" style="display: none;">
        <div class="user-info">
            <span class="user-greeting">üëã Hi, <strong id="userName"></strong></span>
            <div class="user-actions">
                <button onclick="showFavorites()" class="header-btn">
                    ‚ù§Ô∏è Favorites <span id="favCount" class="badge">0</span>
                </button>
                <button onclick="logout()" class="header-btn logout-btn">Logout</button>
            </div>
        </div>
    </div>

    <!-- Guest Header - Not Logged In -->
    <div class="user-header" id="guestHeader">
        <div class="user-info">
            <span class="user-greeting">üè† PacasHomes - Finding Your Dream Home</span>
            <div class="user-actions">
                <button onclick="showLoginModal()" class="header-btn">
                    Sign In
                </button>
                <button onclick="showRegisterFromHeader()" class="header-btn" style="background: white; color: #667eea;">
                    Create Account
                </button>
            </div>
        </div>
    </div>

    <div class="hero">
        <h1>Find Your Dream Home</h1>
        <p>Search homes across the UK with one easy platform</p>

        <div class="search-form">
            <div>
                <label for="site">Source</label>
                <select id="site" name="site" required>
                    <option value="zoopla">Zoopla</option>
                    <option value="rightmove">Rightmove</option>
                    <!-- <option value="openrent">OpenRent</option> Temporarily disabled - requires browser automation -->
                    <option value="combined">All Sites (Combined)</option>
                </select>
            </div>

            <div>
                <label for="location">Location</label>
                <input id="location" placeholder="e.g. London, Manchester" />
                <div id="location-error" class="validation-error"></div>
            </div>

            <div>
                <label for="listing_type">Listing Type</label>
                <select id="listing_type">
                    <option value="sale">For Sale</option>
                    <option value="rent">To Rent</option>
                </select>
            </div>

            <div>
                <label for="min_price">Min Price</label>
                <select id="min_price"></select>
            </div>

            <div>
                <label for="max_price">Max Price</label>
                <select id="max_price"></select>
            </div>

            <div>
                <label for="min_beds">Min Beds</label>
                <select id="min_beds">
                    <option value="">Any</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5+</option>
                </select>
            </div>

            <div>
                <label for="max_beds">Max Beds</label>
                <select id="max_beds">
                    <option value="">Any</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10+</option>
                </select>
            </div>

            <div>
                <label for="keywords">Keywords</label>
                <input id="keywords" placeholder="e.g. garden, garage" />
            </div>

            <div>
                <label for="sort_by">Sort By</label>
                <select id="sort_by">
                    <option value="newest">Newest Listed</option>
                    <option value="price_asc">Price (Low to High)</option>
                    <option value="price_desc">Price (High to Low)</option>
                    <option value="beds_desc">Bedrooms (High to Low)</option>
                    <option value="beds_asc">Bedrooms (Low to High)</option>
                    <option value="oldest">Oldest Listed</option>
                    <option value="distance">Distance</option>
                    <option value="reduced">Price Reduced</option>
                    <option value="most_viewed">Most Viewed</option>
                    <option value="most_reduced">Most Reduced</option>
                </select>
            </div>

            <div class="button-wrapper">
                <button id="searchButton" onclick="performSearch()">Search Properties</button>
                <button id="clearButton" class="clear-button" onclick="clearAllFilters()">Clear Filters</button>
            </div>
        </div>
    </div>

    <div class="section">
        <div class="results-header">
            <h2>üîé Search Results</h2>
            <span id="results-count"></span>
        </div>
        
        <!-- Enhanced Loading Indicator -->
        <div id="progress" class="loading-container" style="display: none;">
            <div class="loading-spinner"></div>
            <div class="loading-text">
                <h3 id="loading-title">Searching for properties...</h3>
                <p id="loading-subtitle">Scanning multiple property sites for the best matches</p>
            </div>
            <div class="loading-dots">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <!-- Skeleton Loader -->
        <div id="skeleton-loader" class="skeleton-container" style="display: none;">
            <div class="skeleton-card">
                <div class="skeleton-image"></div>
                <div class="skeleton-content">
                    <div class="skeleton-line skeleton-title"></div>
                    <div class="skeleton-line skeleton-price"></div>
                    <div class="skeleton-line skeleton-text"></div>
                    <div class="skeleton-line skeleton-text short"></div>
                </div>
            </div>
            <div class="skeleton-card">
                <div class="skeleton-image"></div>
                <div class="skeleton-content">
                    <div class="skeleton-line skeleton-title"></div>
                    <div class="skeleton-line skeleton-price"></div>
                    <div class="skeleton-line skeleton-text"></div>
                    <div class="skeleton-line skeleton-text short"></div>
                </div>
            </div>
            <div class="skeleton-card">
                <div class="skeleton-image"></div>
                <div class="skeleton-content">
                    <div class="skeleton-line skeleton-title"></div>
                    <div class="skeleton-line skeleton-price"></div>
                    <div class="skeleton-line skeleton-text"></div>
                    <div class="skeleton-line skeleton-text short"></div>
                </div>
            </div>
        </div>
        
        <!-- Empty State -->
        <div id="empty-state" class="empty-state">
            <div class="empty-state-icon">üè°</div>
            <h3>Ready to Find Your Perfect Home?</h3>
            <p>Use the search filters above to discover properties that match your needs</p>
            <div class="quick-tips">
                <div class="tip-card">
                    <span class="tip-icon">üìç</span>
                    <h4>Choose Location</h4>
                    <p>Search by postcode, area, or city</p>
                </div>
                <div class="tip-card">
                    <span class="tip-icon">üí∞</span>
                    <h4>Set Budget</h4>
                    <p>Filter by your price range</p>
                </div>
                <div class="tip-card">
                    <span class="tip-icon">üõèÔ∏è</span>
                    <h4>Select Bedrooms</h4>
                    <p>Find the right size for you</p>
                </div>
            </div>
            <button class="cta-button" onclick="document.getElementById('location').focus()">
                Start Your Search
            </button>
        </div>
        
        <div class="results-section">
            <div id="results" class="results-grid"></div>
            <button id="show-more" class="show-more-button" onclick="loadMoreResults()" style="display: none;">
                Show More Listings
            </button>
        </div>
        <div id="pagination"></div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>About PACAS</h3>
                <p>Your trusted platform for finding the perfect property across the UK. We aggregate listings from multiple sources to give you the most comprehensive property search experience.</p>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="#" onclick="scrollToTop()">Back to Top</a></li>
                    <li><a href="#" onclick="showPrivacyPolicy()">Privacy Policy</a></li>
                    <li><a href="#" onclick="showTerms()">Terms of Service</a></li>
                    <li><a href="#" onclick="showTakedownPolicy()">Takedown Policy</a></li>
                    <li><a href="#" onclick="showContact()">Contact Us</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Property Sources</h3>
                <ul>
                    <li><a href="https://www.rightmove.co.uk" target="_blank">Rightmove</a></li>
                    <li><a href="https://www.zoopla.co.uk" target="_blank">Zoopla</a></li>
                    <li><a href="https://www.openrent.co.uk" target="_blank">OpenRent</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Connect With Us</h3>
                <div class="social-links">
                    <a href="#" class="social-link" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                    <a href="#" class="social-link" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="social-link" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p style="color: #ddd;">¬© 2026 Aztura LTD trading as PacasHomes. All rights reserved.</p>
            <p class="footer-version">Version 1.00</p>
        </div>
    </footer>

    <!-- Email Capture Modal -->
    <div id="emailModal" class="email-modal">
        <div class="email-modal-content">
            <span class="email-modal-close">&times;</span>
            <h2>View Property Details</h2>
            <p>Enter your details to continue to the full listing</p>            <div id="emailModalMessage" class="inline-message"></div>            <form id="emailForm">
                <input type="email" id="modalEmail" placeholder="your.email@example.com" required>
                <input type="tel" id="modalPhone" placeholder="Phone number (optional, e.g., +44 7123 456789)" pattern="[+0-9\s]*" title="Phone number can only contain numbers, spaces, and + symbol">
                <div class="modal-checkbox">
                    <input type="checkbox" id="agentCallbackCheckbox" checked>
                    <label for="agentCallbackCheckbox">üìû Get direct callback from agent (recommended)</label>
                </div>
                <button type="submit" class="modal-submit">View Property</button>
            </form>
            <p class="modal-footer">We respect your privacy. No spam, unsubscribe anytime.</p>
            <p class="modal-footer" style="margin-top: 10px;">
                Want unlimited access? <a href="#" id="createAccountLink" style="color: #667eea; text-decoration: underline; cursor: pointer;">Create free account</a>
            </p>
        </div>
    </div>

    <!-- Account Creation Modal (after 5 views) -->
    <div id="accountModal" class="email-modal">
        <div class="email-modal-content">
            <span class="account-modal-close">&times;</span>
            <h2>üéâ Unlock Unlimited Access</h2>
            <p>You've viewed 5 properties! Create a free account to unlock:</p>
            <ul class="benefits-list">
                <li>‚úì Unlimited property viewing</li>
                <li>‚úì Save favorites & get alerts</li>
                <li>‚úì Priority viewing appointments</li>
                <li>‚úì Direct agent contact</li>
            </ul>
            <div id="accountModalMessage" class="inline-message"></div>
            <form id="accountForm">
                <input type="text" id="accountName" placeholder="Full Name" required>
                <input type="email" id="accountEmail" placeholder="Email" required>
                <input type="tel" id="accountPhone" placeholder="Phone Number (e.g., +44 7123 456789)" pattern="[+0-9\s]+" title="Phone number can only contain numbers, spaces, and + symbol" required>
                <input type="password" id="accountPassword" placeholder="Create Password (min 6 characters)" minlength="6" required>
                
                <!-- Verification code section (hidden initially) -->
                <div id="verificationSection" style="display: none;">
                    <div style="background: #f0f4ff; padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <p style="margin: 0 0 10px 0; color: #667eea; font-weight: 600;">üìß Check your email</p>
                        <p style="margin: 0 0 10px 0; font-size: 14px; color: #666;">We've sent a 6-digit code to <span id="verificationEmailDisplay"></span></p>
                        <input type="text" id="verificationCode" placeholder="Enter 6-digit code" maxlength="6" pattern="[0-9]{6}" style="text-align: center; letter-spacing: 5px; font-size: 18px; font-weight: bold;">
                        <button type="button" id="resendCodeBtn" class="resend-btn">Resend Code</button>
                    </div>
                </div>
                
                <button type="submit" class="modal-submit" id="accountSubmitBtn">Create Free Account</button>
            </form>
            <p class="modal-footer">Takes 30 seconds. No credit card required.</p>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="email-modal">
        <div class="email-modal-content">
            <span class="login-modal-close">&times;</span>
            <h2>Welcome Back!</h2>
            <p>Log in to save favorites and access your account</p>
            <div id="loginModalMessage" class="inline-message"></div>
            <form id="loginForm">
                <input type="email" id="loginEmail" placeholder="Email" required>
                <input type="password" id="loginPassword" placeholder="Password" required>
                <button type="submit" class="modal-submit">Log In</button>
            </form>
            <p class="modal-footer">Don't have an account? <a href="#" id="showRegisterLink" style="color: #667eea; text-decoration: underline;">Create one</a></p>
        </div>
    </div>

    <!-- Favorites Modal -->
    <div id="favoritesModal" class="email-modal">
        <div class="email-modal-content" style="max-width: 900px;">
            <span class="favorites-modal-close">&times;</span>
            <h2>‚ù§Ô∏è My Favorites</h2>
            <div id="favoritesContent">
                <p style="text-align: center; color: #999;">Loading favorites...</p>
            </div>
        </div>
    </div>

    <!-- Add Font Awesome for social icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <script src="{{ url_for('static', filename='locationValidator.js') }}"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
